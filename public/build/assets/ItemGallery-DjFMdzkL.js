import{g as oe,i as le,e as se,S as R,N as ae,a as V}from"./navigation-BFrF1Edx.js";import{d as N,aF as I,b7 as O,aD as P,aL as H,b8 as ne,o as x,c as y,ae as k,m as X,af as re,ah as _,ar as W,aj as ie,ay as ue,b9 as E,a as T,ax as A,u as M,ak as U,ag as G,ba as B,bb as me,bc as ce,b as Y,w as L,F as q,an as F}from"./app-DFVQZLTp.js";/* empty css            */function de({swiper:e,extendParams:a,on:o}){a({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let l=!1,t=!1;e.thumbs={swiper:null};function m(){const s=e.thumbs.swiper;return!s||s.destroyed?!1:s.params.virtual&&s.params.virtual.enabled}function b(){const s=e.thumbs.swiper;if(!s||s.destroyed)return;const r=s.clickedIndex,c=s.clickedSlide;if(c&&c.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof r>"u"||r===null)return;let f;s.params.loop?f=parseInt(s.clickedSlide.getAttribute("data-swiper-slide-index"),10):f=r,e.params.loop?e.slideToLoop(f):e.slideTo(f)}function d(){const{thumbs:s}=e.params;if(l)return!1;l=!0;const r=e.constructor;if(s.swiper instanceof r){if(s.swiper.destroyed)return l=!1,!1;e.thumbs.swiper=s.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update()}else if(le(s.swiper)){const c=Object.assign({},s.swiper);Object.assign(c,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new r(c),t=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",b),m()&&e.thumbs.swiper.on("virtualUpdate",()=>{i(!1,{autoScroll:!1})}),!0}function i(s,r){const c=e.thumbs.swiper;if(!c||c.destroyed)return;let f=1;const v=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(f=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(f=1),f=Math.floor(f),c.slides.forEach(h=>h.classList.remove(v)),c.params.loop||m())for(let h=0;h<f;h+=1)se(c.slidesEl,`[data-swiper-slide-index="${e.realIndex+h}"]`).forEach(z=>{z.classList.add(v)});else for(let h=0;h<f;h+=1)c.slides[e.realIndex+h]&&c.slides[e.realIndex+h].classList.add(v);(r?.autoScroll??!0)&&p(s?0:void 0)}function p(s){const r=e.thumbs.swiper;if(!r||r.destroyed)return;const c=r.params.slidesPerView==="auto"?r.slidesPerViewDynamic():r.params.slidesPerView,f=e.params.thumbs.autoScrollOffset,v=f&&!r.params.loop;if(e.realIndex!==r.realIndex||v){const h=r.activeIndex;let z,n;if(r.params.loop){const u=r.slides.find(S=>S.getAttribute("data-swiper-slide-index")===`${e.realIndex}`);z=r.slides.indexOf(u),n=e.activeIndex>e.previousIndex?"next":"prev"}else z=e.realIndex,n=z>e.previousIndex?"next":"prev";v&&(z+=n==="next"?f:-1*f),r.visibleSlidesIndexes&&r.visibleSlidesIndexes.indexOf(z)<0&&(r.params.centeredSlides?z>h?z=z-Math.floor(c/2)+1:z=z+Math.floor(c/2)-1:z>h&&r.params.slidesPerGroup,r.slideTo(z,s))}}o("beforeInit",()=>{const{thumbs:s}=e.params;if(!(!s||!s.swiper))if(typeof s.swiper=="string"||s.swiper instanceof HTMLElement){const r=oe(),c=()=>{const v=typeof s.swiper=="string"?r.querySelector(s.swiper):s.swiper;if(v&&v.swiper)s.swiper=v.swiper,d(),i(!0);else if(v){const h=`${e.params.eventsPrefix}init`,z=n=>{s.swiper=n.detail[0],v.removeEventListener(h,z),d(),i(!0),s.swiper.update(),e.update()};v.addEventListener(h,z)}return v},f=()=>{if(e.destroyed)return;c()||requestAnimationFrame(f)};requestAnimationFrame(f)}else d(),i(!0)}),o("slideChange update resize observerUpdate",()=>{i()}),o("setTransition",(s,r)=>{const c=e.thumbs.swiper;!c||c.destroyed||c.setTransition(r)}),o("beforeDestroy",()=>{const s=e.thumbs.swiper;!s||s.destroyed||t&&s.destroy()}),Object.assign(e.thumbs,{init:d,update:i})}function J(e,a,o){if(a){const l=a.clientWidth,t=a.clientHeight,m=e.left/l,b=e.top/t,d=l*o,i=t*o;let p=-(d-l)*m,s=-(i-t)*b;return p=Math.max(Math.min(p,0),l-d),s=Math.max(Math.min(s,0),t-i),{left:p,top:s}}else return console.error("element not found"),{left:0,top:0}}function fe(e,a,o,l,t){if(l){const m=l.clientWidth,b=l.clientHeight,d=b-b*t,i=m-m*t,p=a.left-e.left,s=a.top-e.top;return{left:Math.max(Math.min(o.left+p,0),i),top:Math.max(Math.min(o.top+s,0),d)}}else return console.error("element not found"),{left:0,top:0}}const ve=(e,a)=>({left:-e.left*a,top:-e.top*a}),pe=(e,a)=>({left:-e.left/a,top:-e.top/a});function he(e){const{clientX:a,clientY:o}=e.changedTouches[0];return{left:a,top:o}}function ge(e,a){const{clientX:o,clientY:l}=e.changedTouches[0],t={left:0,top:0};if(a){const m=a.getBoundingClientRect();t.left=o-m.left,t.top=l-m.top}else return console.error("element not found"),t;return t}function $(e,a){if(a){const o=a.getBoundingClientRect(),l=e.clientX-o.left,t=e.clientY-o.top,m=e.clientX<o.left||e.clientX>o.right||e.clientY<o.top||e.clientY>o.bottom;return{pos:{left:l,top:t},isOutside:m}}return{pos:{left:0,top:0},isOutside:!0}}function K(){const e=I(!1);return{isTransition:e,startTransition:(a=150)=>{e.value=!0,setTimeout(()=>{e.value=!1},a)}}}function Q(e,a,o,l=2){const t=I("IN");return{zoomDir:t,multiStepZoomIn:(m,b,d)=>{let i=m;t.value==="IN"?i=Math.min(m+d,l):i=Math.max(m-d,1),i===1?t.value="IN":i===l&&(t.value="OUT"),e.value=i,a.value=J(b,o.value,i)}}}const be=["src","alt"],ze=N({__name:"DragZoomImg",props:B({src:{},alt:{},zoomScale:{default:2},trigger:{default:"click"},step:{},persist:{type:Boolean}},{currentScale:{default:1},currentScaleModifiers:{},zoomedImgOffset:{default:{left:0,top:0}},zoomedImgOffsetModifiers:{}}),emits:B(["error","load"],["update:currentScale","update:zoomedImgOffset"]),setup(e,{expose:a}){const o=e,l=E(e,"currentScale"),t=E(e,"zoomedImgOffset"),m=I({left:0,top:0}),b=I({left:0,top:0}),d=I(!1),i=P(()=>l.value>1),p=O("container"),s=O("vzImg"),{isTransition:r,startTransition:c}=K(),{multiStepZoomIn:f,zoomDir:v}=Q(l,t,p,o.zoomScale),h=g=>{if(o.trigger==="hover"){const{pos:w}=$(g,p.value);c(),f(l.value,w,o.step??o.zoomScale)}},z=()=>{d.value=!1,o.trigger==="hover"&&D()},n=g=>{const w=Z(g);m.value=w,b.value=w,i.value&&(d.value=!0)},u=g=>{if(!d.value)return;const w=Z(g);t.value=fe(m.value,w,t.value,p.value,l.value),m.value=w},S=g=>{d.value=!1;const w=Z(g);if(b.value.left===w.left&&b.value.top===w.top){const C=te(i.value?new MouseEvent("mouseup",j()):g);c(),f(l.value,C,o.step??o.zoomScale)}},D=()=>{r.value=!0,l.value=1,t.value={left:0,top:0},v.value="IN"},Z=g=>g instanceof MouseEvent?{left:g.clientX,top:g.clientY}:he(g),te=g=>{if(g instanceof MouseEvent){const{pos:w}=$(g,p.value);return w}else return ge(g,p.value)},j=()=>{var g;const w=(g=p.value)==null?void 0:g.getBoundingClientRect(),C=l.value-1===0?1:l.value-1;return{clientX:-t.value.left/C+(w?.left??0),clientY:-t.value.top/C+(w?.top??0)}};return a({zoomDir:v,vzImgRef:s,multiZoom:()=>{const g=j();n(new MouseEvent("mousedown",g)),S(new MouseEvent("mouseup",g))}}),(g,w)=>(x(),y("div",{class:G(["vz-zoomimg-img-container overflow-hidden",{"cursor-grab":i.value&&!d.value,"cursor-grabbing":i.value&&d.value,"cursor-zoom-in":!i.value}]),ref:"container",onMouseenter:h,onMousedown:n,onMousemove:u,onMouseup:S,onMouseleave:z,onTouchstart:U(n,["prevent"]),onTouchmove:U(u,["prevent"]),onTouchend:U(S,["prevent"])},[T("img",{class:"vz-zoomimg-img zoom-effect h-full w-full object-fill",draggable:"false",ref:"vzImg",src:g.src,alt:g.alt,style:A({transform:`translate(${t.value.left}px, ${t.value.top}px) scale(${l.value})`,transformOrigin:"0 0",transition:M(r)?"transform 100ms ease-in-out":"none"}),onError:w[0]||(w[0]=C=>g.$emit("error")),onLoad:w[1]||(w[1]=C=>g.$emit("load"))},null,44,be)],34))}}),we=["src","alt"],Se=N({__name:"MoveZoomImg",props:B({src:{},alt:{},zoomScale:{default:2},trigger:{default:"click"},step:{},persist:{type:Boolean}},{currentScale:{default:1},currentScaleModifiers:{},zoomedImgOffset:{default:{left:0,top:0}},zoomedImgOffsetModifiers:{}}),emits:B(["error","load"],["update:currentScale","update:zoomedImgOffset"]),setup(e,{expose:a}){const o=e,l=E(e,"currentScale"),t=E(e,"zoomedImgOffset"),m=P(()=>l.value>1),b=O("container"),d=O("vzImg"),{isTransition:i,startTransition:p}=K(),{zoomDir:s,multiStepZoomIn:r}=Q(l,t,b,o.zoomScale),c=n=>{if(o.trigger==="hover"){const{pos:u}=$(n,b.value);p(),r(l.value,u,o.step??o.zoomScale)}},f=()=>{o.persist||z()},v=n=>{const{pos:u}=$(n,b.value);p(),r(l.value,u,o.step??o.zoomScale)},h=n=>{const{pos:u,isOutside:S}=$(n,b.value);!S&&m.value&&!i.value&&(t.value=J(u,b.value,l.value))},z=()=>{i.value=!0,l.value=1,t.value={left:0,top:0},s.value="IN"};return a({zoomDir:s,vzImgRef:d,multiZoom:()=>{var n;const u=(n=b.value)==null?void 0:n.getBoundingClientRect();u&&v({clientX:u.x+u.width/2,clientY:u.y+u.height/2})}}),(n,u)=>(x(),y("div",{class:"vz-zoomimg-img-container cursor-zoom-in overflow-clip border-none",ref:"container",style:A({cursor:M(s)==="OUT"?"zoom-out":"zoom-in"}),onMouseenter:c,onMouseleave:f,onMousemove:h,onClick:v},[T("img",{class:"vz-zoomimg-img h-full w-full object-fill",ref:"vzImg",src:n.src,alt:n.alt,style:A({transform:`translate(${t.value.left}px, ${t.value.top}px) scale(${l.value})`,transformOrigin:"0 0",transition:M(i)?"transform 100ms ease-in-out":"none"}),onError:u[0]||(u[0]=S=>n.$emit("error")),onLoad:u[1]||(u[1]=S=>n.$emit("load"))},null,44,we)],36))}}),xe={class:"vz-zoom-btns-container absolute bottom-1 end-1 z-10 flex gap-2 p-3"},Ie=["disabled"],Me=["disabled"],ye=N({__name:"ZoomButtons",props:{maxZoom:{type:Boolean,required:!0},minZoom:{type:Boolean,required:!0}},emits:["zoomIn","zoomOut"],setup(e){return(a,o)=>(x(),y("div",xe,[T("button",{class:"controls-btn zoom-out-btn",disabled:e.minZoom,onClick:o[0]||(o[0]=l=>a.$emit("zoomOut"))},null,8,Ie),T("button",{class:"controls-btn zoom-in-btn",disabled:e.maxZoom,onClick:o[1]||(o[1]=l=>a.$emit("zoomIn"))},null,8,Me)]))}}),ee=(e,a)=>{const o=e.__vccOpts||e;for(const[l,t]of a)o[l]=t;return o},Te=ee(ye,[["__scopeId","data-v-2c73679c"]]),Oe=["alt","src"],Ce=N({__name:"ZoomMap",props:B({src:{type:String,required:!0},alt:{type:String,default:"zoomed-img"},zoomScale:{type:Number,default:2}},{position:{type:Object},positionModifiers:{}}),emits:["update:position"],setup(e){const a=E(e,"position"),o=I(!1),l=O("backdrop"),t=O("movableWindow"),m=I(0),b=I(0),d=c=>{if(l.value){const{pos:f}=$(c,l.value);m.value=f.left,b.value=f.top}};H(()=>{l.value&&l.value.addEventListener("mousemove",d)}),me(()=>{l.value&&l.value.removeEventListener("mousemove",d)}),ce(()=>{o.value&&i()});const i=()=>{a.value=r()},p=()=>{o.value=!0},s=()=>{o.value=!1},r=()=>{var c,f,v,h,z,n;if(l.value&&t.value){const u=((c=l.value)==null?void 0:c.clientHeight)-((f=t.value)==null?void 0:f.clientHeight),S=((v=l.value)==null?void 0:v.clientWidth)-((h=t.value)==null?void 0:h.clientWidth),D=Math.min(Math.max(b.value-Number((z=t.value)==null?void 0:z.clientHeight)/2,0),u),Z=Math.min(Math.max(m.value-Number((n=t.value)==null?void 0:n.clientWidth)/2,0),S);return{top:D,left:Z}}else console.error("couldn't get movable window new position")};return(c,f)=>{var v,h;return x(),y("div",{class:"vz-map-container relative select-none overflow-clip",ref:"backdrop",onClick:i,onMouseleave:s},[T("img",{class:"vz-map-img h-full w-full object-fill",ref:"imgRef",alt:e.alt,src:e.src},null,8,Oe),T("div",{class:G(["vz-map-window absolute bg-white/20 hover:cursor-pointer active:cursor-move",{"invisible -z-10":!a.value}]),ref:"movableWindow",style:A({left:`${(v=a.value)==null?void 0:v.left}px`,top:`${(h=a.value)==null?void 0:h.top}px`,width:`${1/e.zoomScale*100}%`,height:`${1/e.zoomScale*100}%`}),onMousedown:p,onMouseup:s},null,38)],544)}}}),ke={class:"vz-zoomimg-container relative"},$e=N({__name:"ZoomImg",props:{zoomType:{default:"move"},showZoomBtns:{type:Boolean},showImgMap:{type:Boolean},loading:{type:Boolean},src:{},alt:{},zoomScale:{},trigger:{},step:{},persist:{type:Boolean}},emits:["error","load"],setup(e,{emit:a}){const o=a,l=e,t=I(1),m=I({left:0,top:0}),b=I(1080),d=I(!1),i=I(!1),p=O("zoomComponent"),s=P(()=>l.zoomType==="drag"||b.value<768),r=P(()=>{if(t.value!==1)return pe(m.value,t.value*4)}),c=()=>{p.value&&(p.value.zoomDir="IN",p.value.multiZoom())},f=()=>{p.value&&(p.value.zoomDir="OUT",p.value.multiZoom())},v=n=>{n&&(m.value=ve(n,t.value*4))},h=()=>{d.value=!0,o("load")},z=()=>{i.value=!0,o("error")};return H(()=>{var n,u;b.value=window?.innerWidth??1080,(u=(n=p.value)==null?void 0:n.vzImgRef)!=null&&u.complete&&(d.value=!0)}),ne(()=>{var n,u;d.value=!!((u=(n=p.value)==null?void 0:n.vzImgRef)!=null&&u.complete)}),(n,u)=>(x(),y("div",ke,[(x(),k(re(s.value?ze:Se),X({"current-scale":t.value,"onUpdate:currentScale":u[0]||(u[0]=S=>t.value=S),"zoomed-img-offset":m.value,"onUpdate:zoomedImgOffset":u[1]||(u[1]=S=>m.value=S)},l,{ref:"zoomComponent",class:["h-full w-full",{hidden:!d.value&&n.$slots.loading||i.value&&n.$slots.error}],alt:n.alt,onError:z,onLoad:h}),null,16,["current-scale","zoomed-img-offset","alt","class"])),d.value?_("",!0):W(n.$slots,"loading",{key:0},void 0,!0),i.value?W(n.$slots,"error",{key:1},void 0,!0):_("",!0),n.showZoomBtns?(x(),k(Te,X({key:2,"zoomed-img-offset":m.value,"onUpdate:zoomedImgOffset":u[2]||(u[2]=S=>m.value=S),"current-scale":t.value,"onUpdate:currentScale":u[3]||(u[3]=S=>t.value=S)},l,{"max-zoom":t.value===n.zoomScale,"min-zoom":t.value===1,onZoomIn:c,onZoomOut:f}),null,16,["zoomed-img-offset","current-scale","max-zoom","min-zoom"])):_("",!0),n.showImgMap?ie((x(),k(Ce,{key:3,class:"absolute bottom-[28%] left-0 box-content h-[25%] w-[25%] border-8 border-transparent outline outline-2 outline-offset-[-8px] outline-white",src:n.src,"zoom-scale":t.value,position:r.value,"onUpdate:position":v},null,8,["src","zoom-scale","position"])),[[ue,r.value]]):_("",!0)]))}}),Ze=ee($e,[["__scopeId","data-v-95680e56"]]),_e={class:"flex flex-col gap-3"},Ee={class:"w-full aspect-square rounded-xl overflow-hidden border-2 border-transparent cursor-pointer transition-all"},Be=["src","alt"],Ae={__name:"ItemGallery",props:{images:Array,itemName:String},setup(e){const a=[de,ae],o=I(null);function l(m){o.value=m}const t=m=>`/storage/items/${m}`;return(m,b)=>(x(),y("div",_e,[Y(M(V),{modules:a,thumbs:{swiper:o.value},navigation:!0,loop:e.images.length>1,class:"main-gallery w-full rounded-3xl overflow-hidden border border-gray-100 shadow-sm h-[270px] sm:h-[500px]"},{default:L(()=>[(x(!0),y(q,null,F(e.images,(d,i)=>(x(),k(M(R),{key:i},{default:L(()=>[Y(M(Ze),{src:t(d),alt:e.itemName,class:"w-full h-full object-cover","zoom-type":"move",trigger:"click","zoom-scale":4,step:1,"show-zoom-btns":!1},null,8,["src","alt"])]),_:2},1024))),128))]),_:1},8,["thumbs","loop"]),e.images.length>1?(x(),k(M(V),{key:0,modules:a,"watch-slides-progress":"",onSwiper:l,"slides-per-view":6,"space-between":8,"free-mode":!0,class:"thumbs-gallery w-full mt-2"},{default:L(()=>[(x(!0),y(q,null,F(e.images,(d,i)=>(x(),k(M(R),{key:i},{default:L(()=>[T("div",Ee,[T("img",{src:t(d),alt:e.itemName,class:"w-full h-full object-cover"},null,8,Be)])]),_:2},1024))),128))]),_:1})):_("",!0)]))}};export{Ae as default};
