import{b as O,c as X,d as q,e as H,f as J}from"./index-DYn7O5BW.js";import{aC as Q,aE as R,aD as W,aF as b,aK as $,aL as Y,c,b as t,w as n,a as o,u as a,h as Z,al as _,o as r,ae as p,ah as u,am as v,F as U,an as h,ak as ee,aM as le,at as ae,x as se,r as te}from"./app-vpINQVyW.js";import{s as ne}from"./index-C3GP5Xyb.js";import{s as oe}from"./index-CnSytkfE.js";import{s as ie}from"./index-DwESOmtJ.js";import re from"./UpdatePassword-vzl2UD3i.js";/* empty css            */import"./index-2CEaIhhT.js";import"./index-CzQfSQ9u.js";const de={class:"w-full max-w-6xl mx-auto mt-6"},ue={key:1,class:"mb-6 bg-red-50 dark:bg-red-900/40 border border-red-200 dark:border-red-700/50 rounded-lg p-4 flex justify-between"},me={class:"text-red-600 dark:text-red-200 text-sm"},pe={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},fe={for:"tax_id"},ve={key:0,class:"flex items-center gap-2"},Te={__name:"Index",props:["user","editingByAdmin"],emits:["closeEditor"],setup(g,{emit:E}){Q();const S=R(),A=W(()=>S.props.isAdmin),k=g,V=E,y=k.user,x=b("0"),B=b([{key:"individual",value:"Individual"},{key:"legal_entity",value:"Legal Entity"}]),d=b(null),L=b("GE"),l=$({name:null,email:null,lastname:null,is_handyman:!1,tax_id:null,phone_country:L.value,phone:null,address:null,user_type:null});async function C(){d.value?.key!=="individual"&&delete l.lastname,A.value?delete l.user_type:l.user_type=d.value?d.value?.key:null,l.put(route("account.update",y?.id),{preserveScroll:!0,preserveState:!0,onSuccess:i=>{V("closeEditor",200)},onError:i=>{V("closeEditor",422)}})}return $({current_password:null,password:null,password_confirmation:null}),Y(()=>{const i=k.user;d.value={key:i.user_type,value:i.user_type==="individual"?"Individual":"Legal Entity"},l.name=i.name,l.email=i.email,l.lastname=i.lastname,l.is_handyman=i.is_handyman,l.tax_id=i.tax_id,l.phone=i.phone,l.address=i.address}),(i,e)=>{const I=ie,w=X,N=O,P=oe,f=ae,m=le,F=se,D=ne,M=te,T=H,j=q,z=J;return r(),c(U,null,[t(I,{position:"bottom-right",group:"update-account"}),t(a(Z),null,{default:n(()=>[...e[9]||(e[9]=[o("title",null,"Settings",-1)])]),_:1}),o("div",de,[t(z,{value:x.value,"onUpdate:value":e[8]||(e[8]=s=>x.value=s)},{default:n(()=>[t(N,null,{default:n(()=>[t(w,{value:"0"},{default:n(()=>[...e[10]||(e[10]=[_("Profile",-1)])]),_:1}),g.editingByAdmin?u("",!0):(r(),p(w,{key:0,value:"1"},{default:n(()=>[...e[11]||(e[11]=[_("Security",-1)])]),_:1}))]),_:1}),t(j,null,{default:n(()=>[t(T,{value:"0"},{default:n(()=>[i.$page.props.flash.message?(r(),p(P,{key:0,class:"w-full max-w-[360px] mb-4 mx-auto",icon:"pi pi-check-circle",closable:!0,severity:"success"},{default:n(()=>[_(v(i.$page.props.flash.message),1)]),_:1})):u("",!0),Object.keys(a(l).errors).length>0?(r(),c("div",ue,[o("div",me,[(r(!0),c(U,null,h(a(l).errors,(s,G,K)=>(r(),c("p",{key:G},v(K+1)+") "+v(s),1))),128))]),e[12]||(e[12]=o("i",{class:"pi pi-exclamation-circle text-red-400 mr-3 mt-0.5"},null,-1))])):u("",!0),o("form",{onSubmit:ee(C,["prevent"]),class:"w-full space-y-6 py-6"},[o("div",pe,[t(m,{variant:"on",class:"w-full"},{default:n(()=>[t(f,{class:"w-full",id:"name",modelValue:a(l).name,"onUpdate:modelValue":e[0]||(e[0]=s=>a(l).name=s),invalid:!!a(l).errors.name},null,8,["modelValue","invalid"]),e[13]||(e[13]=o("label",{for:"name"},"Name",-1))]),_:1}),d.value?.key==="individual"?(r(),p(m,{key:0,variant:"on",class:"w-full"},{default:n(()=>[t(f,{class:"w-full",id:"lastname",modelValue:a(l).lastname,"onUpdate:modelValue":e[1]||(e[1]=s=>a(l).lastname=s),invalid:!!a(l).errors.lastname},null,8,["modelValue","invalid"]),e[14]||(e[14]=o("label",{for:"lastname"},"Lastname",-1))]),_:1})):u("",!0),a(y).role!=="admin"?(r(),p(m,{key:1,variant:"on",class:"w-full"},{default:n(()=>[t(f,{class:"w-full",id:"tax_id",modelValue:a(l).tax_id,"onUpdate:modelValue":e[2]||(e[2]=s=>a(l).tax_id=s),invalid:!!a(l).errors.tax_id},null,8,["modelValue","invalid"]),o("label",fe,v(d.value?.key==="legal_entity"?"TAX ID":"ID Number"),1)]),_:1})):u("",!0),t(m,{variant:"on",class:"w-full"},{default:n(()=>[t(f,{class:"w-full",id:"phone",modelValue:a(l).phone,"onUpdate:modelValue":e[3]||(e[3]=s=>a(l).phone=s),invalid:!!a(l).errors.phone},null,8,["modelValue","invalid"]),e[15]||(e[15]=o("label",{for:"phone"},"Phone Number",-1))]),_:1}),t(m,{variant:"on"},{default:n(()=>[t(f,{class:"w-full",id:"email",modelValue:a(l).email,"onUpdate:modelValue":e[4]||(e[4]=s=>a(l).email=s),invalid:!!a(l).errors.email},null,8,["modelValue","invalid"]),e[16]||(e[16]=o("label",{for:"email"},"Email",-1))]),_:1}),a(y).role!=="admin"?(r(),p(m,{key:2,variant:"on",class:"w-full"},{default:n(()=>[t(f,{class:"w-full",id:"address",modelValue:a(l).address,"onUpdate:modelValue":e[5]||(e[5]=s=>a(l).address=s),invalid:!!a(l).errors.address},null,8,["modelValue","invalid"]),e[17]||(e[17]=o("label",{for:"address"},"Address",-1))]),_:1})):u("",!0),a(y).role!=="admin"?(r(),p(m,{key:3,variant:"on",class:"w-full"},{default:n(()=>[t(F,{modelValue:d.value,"onUpdate:modelValue":e[6]||(e[6]=s=>d.value=s),options:B.value,optionLabel:"key",class:"w-full"},{option:n(s=>[o("p",null,v(s.option.value),1)]),value:n(s=>[_(v(s.value?.value),1)]),_:1},8,["modelValue","options"]),e[18]||(e[18]=o("label",{for:"user_type"},"User Type",-1))]),_:1})):u("",!0)]),d.value?.key==="individual"?(r(),c("div",ve,[t(D,{modelValue:a(l).is_handyman,"onUpdate:modelValue":e[7]||(e[7]=s=>a(l).is_handyman=s),binary:""},null,8,["modelValue"]),e[19]||(e[19]=o("label",{for:"ingredient1"}," I am a handyman ",-1))])):u("",!0),t(M,{disabled:a(l).processing,type:"submit",class:"bg-blue-500 border-none",label:a(l).processing?"Please wait...":"Save Changes",size:"medium",icon:a(l).processing?"pi pi-spin pi-spinner":"pi pi-save"},null,8,["disabled","label","icon"])],32)]),_:1}),g.editingByAdmin?u("",!0):(r(),p(T,{key:0,value:"1"},{default:n(()=>[t(re)]),_:1}))]),_:1})]),_:1},8,["value"])])],64)}}};export{Te as default};
